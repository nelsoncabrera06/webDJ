<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ Mix Web - Professional DJ Software</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/deck.css">
    <link rel="stylesheet" href="css/mixer.css">
    <link rel="stylesheet" href="css/waveform.css">
    <link rel="stylesheet" href="css/platter.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>DJ Mix Web</h1>
            <div class="header-controls">
                <div class="midi-indicator" id="midiIndicator" title="MIDI Controller">
                    <span class="midi-icon">&#9835;</span>
                    <span class="midi-status">MIDI</span>
                </div>
                <span id="masterBpm">Master: -- BPM</span>
                <button class="settings-btn" id="settingsBtn" title="Settings">
                    <span class="settings-icon">&#9881;</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Zoomed Waveforms Display -->
            <section class="waveforms-section">
                <div class="zoomed-waveform-container">
                    <canvas id="zoomedWaveformA" class="zoomed-waveform deck-a"></canvas>
                    <canvas id="zoomedWaveformB" class="zoomed-waveform deck-b"></canvas>
                    <div class="playhead-indicator"></div>
                </div>
            </section>

            <!-- Decks and Mixer -->
            <section class="decks-section">
                <!-- Deck A -->
                <div class="deck" id="deckA" data-deck="A">
                    <div class="deck-header">
                        <span class="deck-label">DECK A</span>
                        <div class="track-info">
                            <span class="track-name" id="trackNameA">No Track Loaded</span>
                            <span class="track-bpm" id="trackBpmA">-- BPM</span>
                        </div>
                    </div>

                    <!-- Mini Waveform -->
                    <div class="mini-waveform-container">
                        <canvas id="waveformA" class="mini-waveform"></canvas>
                        <div class="waveform-time">
                            <span id="currentTimeA">0:00</span>
                            <span id="totalTimeA">0:00</span>
                        </div>
                    </div>

                    <!-- Load Button / Drop Zone -->
                    <div class="load-zone" id="loadZoneA">
                        <input type="file" id="fileInputA" accept="audio/*" hidden>
                        <button class="load-btn" onclick="document.getElementById('fileInputA').click()">
                            Load Track
                        </button>
                        <span class="drop-hint">or drag & drop</span>
                    </div>

                    <!-- Platter -->
                    <div class="platter-container">
                        <div class="platter" id="platterA">
                            <div class="vinyl-disc">
                                <div class="vinyl-marker"></div>
                                <div class="vinyl-label">
                                    <div class="vinyl-hole"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loop Controls -->
                    <div class="loop-controls">
                        <span class="loop-label">LOOP</span>
                        <div class="loop-buttons">
                            <button class="loop-btn loop-halve" id="loopHalveA" title="Halve loop">&lt;</button>
                            <button class="loop-btn loop-toggle" id="loopToggleA" title="Toggle loop">4</button>
                            <button class="loop-btn loop-double" id="loopDoubleA" title="Double loop">&gt;</button>
                        </div>
                    </div>

                    <!-- Tempo & Pitch Controls -->
                    <div class="tempo-pitch-section">
                        <div class="control-group">
                            <label>TEMPO</label>
                            <div class="slider-with-reset">
                                <input type="range" id="tempoA" class="vertical-slider" min="0.5" max="1.5" step="0.01" value="1.0" orient="vertical">
                                <button class="reset-tempo-btn" id="resetTempoA" title="Reset tempo">&#9664;</button>
                            </div>
                            <span class="control-value" id="tempoValueA">1.00x</span>
                        </div>
                        <div class="control-group pitch-control">
                            <label>PITCH</label>
                            <input type="range" id="pitchA" class="vertical-slider" min="-12" max="12" step="0.1" value="0" orient="vertical">
                            <span class="control-value" id="pitchValueA">0 st</span>
                        </div>
                    </div>

                    <!-- Transport Controls -->
                    <div class="transport-controls">
                        <button class="transport-btn play-btn" id="playA">
                            <span class="icon">▶</span>
                        </button>
                        <button class="transport-btn pause-btn" id="pauseA">
                            <span class="icon">⏸</span>
                        </button>
                        <button class="transport-btn stop-btn" id="stopA">
                            <span class="icon">⏹</span>
                        </button>
                        <button class="transport-btn cue-btn" id="cueA">
                            CUE
                        </button>
                        <button class="transport-btn sync-btn" id="syncA">
                            SYNC
                        </button>
                    </div>

                    <!-- Hot Cues -->
                    <div class="hot-cues-container">
                        <div class="hot-cues-grid">
                            <div class="hot-cues-row">
                                <button class="hot-cue-btn" id="hotCueA1">1</button>
                                <button class="hot-cue-btn" id="hotCueA2">2</button>
                                <button class="hot-cue-btn" id="hotCueA3">3</button>
                                <button class="hot-cue-btn" id="hotCueA4">4</button>
                            </div>
                            <div class="hot-cues-row">
                                <button class="hot-cue-btn" id="hotCueA5">5</button>
                                <button class="hot-cue-btn" id="hotCueA6">6</button>
                                <button class="hot-cue-btn" id="hotCueA7">7</button>
                                <button class="hot-cue-btn" id="hotCueA8">8</button>
                            </div>
                        </div>
                        <button class="del-btn" id="delA">DEL</button>
                    </div>
                </div>

                <!-- Mixer -->
                <div class="mixer" id="mixer">
                    <div class="mixer-header">
                        <span>MIXER</span>
                    </div>

                    <!-- EQ Section -->
                    <div class="eq-section">
                        <!-- Deck A EQ -->
                        <div class="eq-column" id="eqA">
                            <div class="eq-knob-container">
                                <label>HI</label>
                                <div class="knob" id="eqHighA" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                            <div class="eq-knob-container">
                                <label>MID</label>
                                <div class="knob" id="eqMidA" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                            <div class="eq-knob-container">
                                <label>LOW</label>
                                <div class="knob" id="eqLowA" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                        </div>

                        <!-- Deck B EQ -->
                        <div class="eq-column" id="eqB">
                            <div class="eq-knob-container">
                                <label>HI</label>
                                <div class="knob" id="eqHighB" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                            <div class="eq-knob-container">
                                <label>MID</label>
                                <div class="knob" id="eqMidB" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                            <div class="eq-knob-container">
                                <label>LOW</label>
                                <div class="knob" id="eqLowB" data-value="0" data-min="-12" data-max="12"></div>
                                <span class="knob-value">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Volume Faders -->
                    <div class="volume-section">
                        <div class="volume-fader-container">
                            <label>A</label>
                            <input type="range" id="volumeA" class="volume-fader" min="0" max="1" step="0.01" value="1" orient="vertical">
                            <div class="volume-meter" id="meterA">
                                <div class="meter-fill"></div>
                            </div>
                        </div>
                        <div class="volume-fader-container">
                            <label>B</label>
                            <input type="range" id="volumeB" class="volume-fader" min="0" max="1" step="0.01" value="1" orient="vertical">
                            <div class="volume-meter" id="meterB">
                                <div class="meter-fill"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Crossfader -->
                    <div class="crossfader-section">
                        <label>CROSSFADER</label>
                        <div class="crossfader-container">
                            <span class="cf-label">A</span>
                            <input type="range" id="crossfader" class="crossfader" min="0" max="1" step="0.01" value="0.5">
                            <span class="cf-label">B</span>
                        </div>
                    </div>
                </div>

                <!-- Deck B -->
                <div class="deck" id="deckB" data-deck="B">
                    <div class="deck-header">
                        <span class="deck-label">DECK B</span>
                        <div class="track-info">
                            <span class="track-name" id="trackNameB">No Track Loaded</span>
                            <span class="track-bpm" id="trackBpmB">-- BPM</span>
                        </div>
                    </div>

                    <!-- Mini Waveform -->
                    <div class="mini-waveform-container">
                        <canvas id="waveformB" class="mini-waveform"></canvas>
                        <div class="waveform-time">
                            <span id="currentTimeB">0:00</span>
                            <span id="totalTimeB">0:00</span>
                        </div>
                    </div>

                    <!-- Load Button / Drop Zone -->
                    <div class="load-zone" id="loadZoneB">
                        <input type="file" id="fileInputB" accept="audio/*" hidden>
                        <button class="load-btn" onclick="document.getElementById('fileInputB').click()">
                            Load Track
                        </button>
                        <span class="drop-hint">or drag & drop</span>
                    </div>

                    <!-- Platter -->
                    <div class="platter-container">
                        <div class="platter" id="platterB">
                            <div class="vinyl-disc">
                                <div class="vinyl-marker"></div>
                                <div class="vinyl-label">
                                    <div class="vinyl-hole"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loop Controls -->
                    <div class="loop-controls">
                        <span class="loop-label">LOOP</span>
                        <div class="loop-buttons">
                            <button class="loop-btn loop-halve" id="loopHalveB" title="Halve loop">&lt;</button>
                            <button class="loop-btn loop-toggle" id="loopToggleB" title="Toggle loop">4</button>
                            <button class="loop-btn loop-double" id="loopDoubleB" title="Double loop">&gt;</button>
                        </div>
                    </div>

                    <!-- Tempo & Pitch Controls -->
                    <div class="tempo-pitch-section">
                        <div class="control-group">
                            <label>TEMPO</label>
                            <div class="slider-with-reset">
                                <button class="reset-tempo-btn" id="resetTempoB" title="Reset tempo">&#9654;</button>
                                <input type="range" id="tempoB" class="vertical-slider" min="0.5" max="1.5" step="0.01" value="1.0" orient="vertical">
                            </div>
                            <span class="control-value" id="tempoValueB">1.00x</span>
                        </div>
                        <div class="control-group pitch-control">
                            <label>PITCH</label>
                            <input type="range" id="pitchB" class="vertical-slider" min="-12" max="12" step="0.1" value="0" orient="vertical">
                            <span class="control-value" id="pitchValueB">0 st</span>
                        </div>
                    </div>

                    <!-- Transport Controls -->
                    <div class="transport-controls">
                        <button class="transport-btn play-btn" id="playB">
                            <span class="icon">▶</span>
                        </button>
                        <button class="transport-btn pause-btn" id="pauseB">
                            <span class="icon">⏸</span>
                        </button>
                        <button class="transport-btn stop-btn" id="stopB">
                            <span class="icon">⏹</span>
                        </button>
                        <button class="transport-btn cue-btn" id="cueB">
                            CUE
                        </button>
                        <button class="transport-btn sync-btn" id="syncB">
                            SYNC
                        </button>
                    </div>

                    <!-- Hot Cues -->
                    <div class="hot-cues-container">
                        <div class="hot-cues-grid">
                            <div class="hot-cues-row">
                                <button class="hot-cue-btn" id="hotCueB1">1</button>
                                <button class="hot-cue-btn" id="hotCueB2">2</button>
                                <button class="hot-cue-btn" id="hotCueB3">3</button>
                                <button class="hot-cue-btn" id="hotCueB4">4</button>
                            </div>
                            <div class="hot-cues-row">
                                <button class="hot-cue-btn" id="hotCueB5">5</button>
                                <button class="hot-cue-btn" id="hotCueB6">6</button>
                                <button class="hot-cue-btn" id="hotCueB7">7</button>
                                <button class="hot-cue-btn" id="hotCueB8">8</button>
                            </div>
                        </div>
                        <button class="del-btn" id="delB">DEL</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <span>DJ Mix Web - Built with Web Audio API</span>
        </footer>

        <!-- Settings Modal -->
        <div class="settings-modal" id="settingsModal">
            <div class="settings-panel">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <button class="close-btn" id="closeSettings">&times;</button>
                </div>
                <div class="settings-content">
                    <div class="setting-item">
                        <div class="setting-label">
                            <span class="setting-title">Pitch Mode</span>
                            <span class="setting-desc">How tempo affects pitch</span>
                        </div>
                        <div class="setting-control">
                            <select id="pitchMode">
                                <option value="linked" selected>Linked (pitch stays constant)</option>
                                <option value="independent">Independent (vinyl style)</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">
                            <span class="setting-title">Auto Mix</span>
                            <span class="setting-desc">Automatic crossfade 10 seconds before track ends</span>
                        </div>
                        <div class="setting-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoMixEnabled">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Click to Start Overlay -->
    <div class="start-overlay" id="startOverlay">
        <div class="start-content">
            <div class="start-icon">&#9654;</div>
            <span class="start-text">Click to start</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/bpmDetector.js"></script>
    <script src="js/waveformGenerator.js"></script>
    <script src="js/audioEngine.js"></script>
    <script src="js/deck.js"></script>
    <script src="js/mixer.js"></script>
    <script src="js/knob.js"></script>
    <script src="js/midi.js"></script>
    <script src="js/platter.js"></script>
    <script src="js/autoMixer.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
